Δημητριος Λυκουργιωτης
sdi2000257

ΕΡΓΑΣΙΑ 2 ΣΥΣΠΡΟ

Ο κωδικας μου αποτελειται απο τα αρχεια server.c client.c queue.c queue.h Makefile

Για να μεταγγλωτισω και να φιταξω τα εκτελεσιμα poller και pollSwayer παταω make και για να καταστρεψω τα objectives αρχεια και τα executables παταω make clean.

Εχω υλοποιησει το problem 1 και problem 2 της εργασιας, Multi-threaded network server και Batch client for testing purposes αντιστοιχα.

Ο κωδικας μου εχει ως βαση τον κωδικα της Μεμας Ρουσσουπουλου, στις διαφανειες του 5ου pdf των sockets, ο κωδικας για το server-client.
Εκει βασιστηκα και αρχισα να υλοποιω την εργασια.
Στην ουσια εχω υλοποιησει οτι ζηταει η εργασια με την προσθηκη οτι στελνω και SEND LASTNAME και αποθηκευω και επιθετο του ψηφοφορου εκτος απτο ονομα του.

Οταν πατησω control C γινεται terminate μερικες φορες με την 1η μερικες φορες με τη 2η φορα και γεμιζω το Poll stats.

Το master thread μου ειναι η ιδια η main Που δημιουργει τα worker threads τα οποια παιρνουν σαν ορισμα το thread function που εχω.

Στην ουσια το master thread (η main μου) γεμιζει το queue με συνδεσεις, εαν ειναι γεματο περιμενει να αδειασει καποια θεση, τα worker threads εαν
ειναι αδειο το queue περιμενουν να μπει καποια συνδεση, οταν μπει την παιρνουν και καλουν την handle connection η οποια επικοινωνει με τον client
για να λαβει ονομα/επωνυμο/ψηφο. Εαν εχει ψηφισει ηδη δεν καταμετρειται η ψηφος του και τυπωνεται το μηνυμα ALREADY VOTED.
Το ονομα και η ψηφος καθε client καταγραφονται στο pollLog και οταν λαβω control C καταγραφω τους συνολικους ψηφους καθε κομματος και τα total votes.

Εχω ενα struct Vote που αποθηκευει το ονομα επιθετο και τη ψηφο που του αντιστοιχει και μετα τα εκτυπωνει στο log.
Εχω και ενα δευτερο struct kommaCount οπου αποθηκευω τα κομματα και τις ψηφους που εχουν το καθετα.

Στο client.c εχω ενα struct threadargs με πληροφοριες και το περναω σαν ορισμα στην client thread function, οπου καθε client επεικοινωνει με τον server.
Πρωτα κανω parse to inputFile για να δω ποσους clients (γραμμες) εχει και υστερα αποθηκευω στο struct πληροφοριες για καθε πελατη.